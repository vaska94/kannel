README for Kannel: Open Source SMS Gateway


Abstract

	This README describes Kannel, the Open Source SMS gateway,
	and how it can be used and installed.

Disclaimer

	This is an independent fork of Kannel maintained at:
	https://github.com/vaska94/kannel

	This project has NO affiliation with the original Kannel project
	(kannel.org). It is a community-maintained modification focused on
	modernization and continued development.

Introduction

	This is a streamlined version of Kannel focused on SMS gateway
	functionality. All legacy WAP components have been removed to create
	a modern, lightweight SMS-only gateway suitable for contemporary
	deployments. The SMS functionality is mature and production-ready.
	
Requirements

	• Unix-like operating system with POSIX threads support
	• GNU make (check with: make --version)
	• GNU autotools (autoconf, automake, libtool)
	• libxml2 development headers
	• Optional: SSL/TLS support (OpenSSL)
	• Optional: Database support (MySQL, PostgreSQL, SQLite3, Redis)
	• Optional: gnuplot (for benchmark graphs)

Build Dependencies

	Debian/Ubuntu:
		sudo apt install build-essential autotools-dev autoconf automake \
		                 libtool libxml2-dev libssl-dev pkg-config \
		                 libmysqlclient-dev libpq-dev libsqlite3-dev \
		                 libhiredis-dev

	RHEL/CentOS/Fedora:
		sudo dnf install gcc make autoconf automake libtool libxml2-devel \
		                 openssl-devel pkgconfig mysql-devel postgresql-devel \
		                 sqlite-devel hiredis-devel gettext-devel

	Arch Linux:
		sudo pacman -S base-devel autoconf automake libtool libxml2 openssl \
		               mariadb-libs postgresql-libs sqlite hiredis

Documentation

	The user manual is in the doc/userguide directory. Documentation
	is provided in HTML format only. Legacy documentation formats
	(PostScript, PDF, RTF) and build tooling have been removed.
	
Getting the gateway sources

	Clone the repository from GitHub:

		git clone https://github.com/vaska94/kannel.git

	Note: This fork has no affiliation with the original Kannel project.

Quick Build Instructions

	1. Bootstrap the build system:
		autoreconf -fi

	2. Configure with desired options:
		./configure --enable-ssl --disable-ssl-thread-test \
		            --with-mysql --with-pgsql --with-sqlite3 --with-redis \
		            ac_cv_sys_file_offset_bits=64

	3. Build the gateway:
		make

	4. Generate SSL certificates for testing (required for make check):
		make ssl-certs

	5. Run tests (optional):
		make check

	6. Install (optional):
		sudo make install
		or better
		make install-exec install-data-am

Configuration Options

	Essential options:
		--enable-ssl              Enable SSL/TLS support
		--with-ssl=/usr          SSL library location
		--disable-ssl-thread-test Disable SSL threading test

	Database support:
		--with-mysql             Enable MySQL support
		--with-pgsql             Enable PostgreSQL support  
		--with-sqlite3           Enable SQLite3 support
		--with-redis             Enable Redis support

	Special parameters:
		ac_cv_sys_file_offset_bits=64  Fix file offset detection on modern systems

	For minimal build (SMS only, no databases):
		./configure ac_cv_sys_file_offset_bits=64

SSL Certificates

	For SSL/TLS functionality, generate test certificates:
		make ssl-certs          - Generate 2048-bit RSA certificates with SHA256
		make ssl-certs-clean    - Remove generated certificates

	Note: Generated certificates are self-signed for testing only.
	Use proper CA-signed certificates in production.

Built Programs

	After compilation, you'll have:
		gw/bearerbox      - Main SMS gateway daemon
		gw/smsbox         - SMS box service
		utils/mtbatch     - Batch MT sender utility
		utils/run_kannel_box - Box runner utility
		utils/decode_emimsg  - EMI message decoder

	See the User Guide in doc/userguide/ for configuration details.

For developers only: autoconf, configure, config.status, and Makefile

	We use the GNU autoconf tool to make it easier to adapt Kannel to
	each platform. The `autoconf' program reads the file configure.in,
	and generates a corresponding shell script called configure,
	which investigates the system it runs on to see what it supports
	and what it does not. configure then reads Makefile.in and
	config.h.in and writes out Makefile, config.h, and a shell
	script config.status.
	
	If you modify configure.in, you need to run autoconf.
	
	If you modify Makefile.in or config.h.in, you need to run
	config.status.
	
	If you modify any source files to add or change any header
	includes, you need to run "make depend".
	
	You always need to run "make" (which is the same as "make all").
	
	If you have trouble building things and suspect that there is a
	problem with the Makefile, run "make clean all". If that solves
	it, report it as a bug (see the end of this README).

For developers only: adding new SMS Center protocol support

	As Kannel does not support all the SMSC protocols that exists,
	it might become necessary to add new kind of protocols, 
	including support to use mobile phones as SMSCes.

	When doing this, read interface specification in gw/smscconn_p.h.
	Drivers should stick to these rules as good as they can.

For developers only: Running benchmarks

	Kannel includes performance benchmarks for HTTP and SMS/SMPP:

	Requirements:
		• gnuplot (for generating graphs)
		• SSL certificates generated (make ssl-certs)

	Run all benchmarks:
		./benchmarks/run-benchmarks benchmarks/bench_http.sh benchmarks/bench_sms.sh

	Run with fast mode (1,000 iterations instead of 100,000):
		./benchmarks/run-benchmarks --fast benchmarks/bench_http.sh benchmarks/bench_sms.sh

	Run individual benchmarks:
		./benchmarks/bench_http.sh          # HTTP benchmark (100,000 requests)
		./benchmarks/bench_http.sh --fast   # HTTP benchmark (1,000 requests)
		./benchmarks/bench_sms.sh           # SMS/SMPP benchmark (100,000 messages)
		./benchmarks/bench_sms.sh --fast    # SMS/SMPP benchmark (1,000 messages)

	Results are written to benchmarks/report.xml with PNG graphs.

For developers only: "make check"

	The Kannel Makefile contains a target called "check", which
	is used to run a series of automatic, non-interactive tests on
	various subsystems. 
	
	Each test program MUST stored in the `checks' subdirectory. Each
	test MUST be written either as a C program named `check_*.c'
	or a Bourne shell script named `check_*.sh'. The C programs are
	compiled by the Makefile, the shell scripts MUST be executable.

	The test programs MUST output nothing to stdout, and MUST use a
	zero exit code to indicate that the test was successful, and a
	non-zero exit code to indicate a failure of the test. This way,
	if one runs "make -s check", one can easily see which tests are
	run and which tests work.
	
	The test programs MUST output error messages to stderr and they
	MUST mention which test program and which subtest failed. In
	case of failure, they may leave log files or other auxiliary
	files, and these MUST be listed in the error messages to stderr,
	so that the user has a reasonable way to diagnose the error.
	The Makefile captures the stderr output to `check.log'.

	The tests SHOULD take a reasonable time, preferably less than
	fifteen seconds each. This way, one can run "make -s check"
	before each commit. If there is a need to run longer tests,
	then the tests need to be divided into fast and slow ones.
	
	These tests are meant to test whether subsystems mostly work,
	stress testing needs to be done separately, and tends to require
	testing against real applications.

For developers only: Source tree organization

	The source tree is organized as follows:
	
		gateway		root of source tree: some docs, no sources
		|-- contrib	contributed extra material
		|-- doc		documentation
		|-- gw		the gateway itself
		|-- gwlib	utility functions
		|-- test	programs for testing the gateway
		`-- utils	utility programs

For developers only: References

	RFC-2279	UTF-8, a transformation format of ISO 10646

	rfc/iana/assignments/character-sets
		      The official names for character sets that may
		      be used in the Internet and may be referred to in
		      Internet Documentation.

	ANSI/IEEE Std 754-1985
		      IEEE Standard for Binary Floating-Point Arithmetic.
		      Institute of Electrical and Electronics Engineers,
		      New York (1985).

Configuring and running the gateway

	See the user guide in doc/userguide for configuration details.

	Sample configurations are available in doc/examples/.

Feedback and issues

	Report issues and contribute at:
	https://github.com/vaska94/kannel/issues
